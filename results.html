<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Painel de Resultados - Equipes</title>
    <style>
        body { background: #0d0f14; color: #e6e6e6; font-family: "Segoe UI", sans-serif; padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        h1 { color: #4f8cff; text-align: center; margin-bottom: 30px; }
        
        /* Layout de Colunas */
        .painel-equipes {
            display: flex;
            gap: 20px;
            justify-content: space-between;
        }
        
        .coluna {
            flex: 1;
            background: #161920;
            border-radius: 12px;
            padding: 15px;
            min-height: 400px;
            border-top: 5px solid #2d333f;
        }

        /* Cores das Colunas (Ajustadas para a nova posi√ß√£o) */
        .coluna-a { border-top-color: #3308f5; } /* SET A - Esquerda */
        .coluna-b { border-top-color: #ec790c; } /* SET B - Direita */

        h2 { text-align: center; font-size: 1.2rem; margin-top: 0; padding-bottom: 10px; border-bottom: 1px solid #2d333f; }
        .titulo-a { color: #3308f5; }
        .titulo-b { color: #ec790c; }

        /* Estilo dos Cards */
        .card {
            background: #1d212c;
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #2d333f;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .card .nome { font-weight: bold; font-size: 16px; color: #fff; }
        .card .info { font-size: 13px; color: #9ab6ff; }
        .card .stats { display: flex; justify-content: space-between; margin-top: 5px; font-size: 14px; }
        
        .acertos-b { color: #ff4f4f; }
        .acertos-a { color: #4fff90; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Relat√≥rio das Equipes</h1>
        
        <div class="painel-equipes">
            <div class="coluna coluna-a">
                <h2 class="titulo-a">üîµ SET A (Aprovados)</h2>
                <div id="lista-a">Carregando...</div>
            </div>

            <div class="coluna coluna-b">
                <h2 class="titulo-b">üü† SET B (Treinamento)</h2>
                <div id="lista-b">Carregando...</div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = `http://${window.location.hostname}:3000/submissions`;

        fetch(API_URL)
            .then(res => res.json())
            .then(data => {
                const listaA = document.getElementById('lista-a');
                const listaB = document.getElementById('lista-b');
                
                listaA.innerHTML = "";
                listaB.innerHTML = "";

                if (data.length === 0) {
                    listaA.innerHTML = listaB.innerHTML = "<p style='text-align:center'>Vazio</p>";
                    return;
                }

                data.forEach(item => {
                    const dataFormatada = new Date(item.data_resposta).toLocaleDateString('pt-BR');
                    const corAcertos = item.classificacao === 'A' ? 'acertos-a' : 'acertos-b';
                    
                    const cardHtml = `
                        <div class="card">
                            <div class="nome">${item.nome}</div>
                            <div class="info">Idade: ${item.idade} | Data: ${dataFormatada}</div>
                            <div class="stats">
                                <span>Pontua√ß√£o:</span>
                                <span class="${corAcertos}"><strong>${item.acertos} / 20</strong></span>
                            </div>
                        </div>
                    `;

                    if (item.classificacao === 'A') {
                        listaA.innerHTML += cardHtml;
                    } else {
                        listaB.innerHTML += cardHtml;
                    }
                });

                if (listaA.innerHTML === "") listaA.innerHTML = "<p style='text-align:center; opacity:0.5'>Nenhum t√©cnico no SET A</p>";
                if (listaB.innerHTML === "") listaB.innerHTML = "<p style='text-align:center; opacity:0.5'>Nenhum t√©cnico no SET B</p>";
            })
            .catch(err => {
                console.error(err);
                alert("Erro ao conectar com o servidor.");
            });
    </script>
</body>
</html>