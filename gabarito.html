<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Revis√£o Completa do Teste</title>
    <style>
        body { background: #0d0f14; color: #e6e6e6; font-family: "Segoe UI", sans-serif; padding: 20px; line-height: 1.6; }
        .container { max-width: 850px; margin: auto; }
        h1 { color: #4f8cff; text-align: center; }
        .pergunta-box { background: #161920; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 6px solid #2d333f; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        
        /* Cores de feedback */
        .correta { border-left-color: #4fff90; }
        .errada { border-left-color: #ff4f4f; }
        
        .opcoes-lista { list-style: none; padding: 0; margin-top: 10px; }
        .opcao { padding: 8px 12px; margin: 4px 0; border-radius: 6px; background: #1d212c; font-size: 15px; border: 1px solid transparent; }
        
        /* Destaques das op√ß√µes */
        .marcada-correta { background: rgba(79, 255, 144, 0.2); border: 1px solid #4fff90; color: #4fff90; }
        .marcada-errada { background: rgba(255, 79, 79, 0.2); border: 1px solid #ff4f4f; color: #ff4f4f; }
        .deveria-ser { border: 1px dashed #4fff90; color: #4fff90; }

        .header-info { background: #1d212c; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 30px; border: 1px solid #4f8cff; }
        .btn-voltar { display: block; width: 220px; margin: 30px auto; padding: 15px; text-align: center; background: #4f8cff; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Revis√£o Detalhada</h1>
        <div id="resultado-info" class="header-info">Carregando sua revis√£o...</div>
        <div id="gabarito-lista"></div>
        <a href="thanks.html" class="btn-voltar">Finalizar Revis√£o</a>
    </div>

<script>
const perguntas = [
  ["Durante a fus√£o de fibras √≥pticas, qual fator √© mais cr√≠tico para garantir baixa atenua√ß√£o?",
    ["O comprimento do cabo",
     "A pot√™ncia do laser",
     "O alinhamento preciso dos n√∫cleos da fibra",
     "A cor do conector",
     "O tipo de OLT utilizada"]],

  ["Ao crimpar um cabo de rede para uso profissional, o padr√£o mais utilizado em redes corporativas √©:",
    ["IEEE 802.11",
     "CAT7 industrial",
     "568C M.M.L.A.A.L.V.V",
     "Padr√£o de cores V.V.L.A.A.L.M.M",
     "SC/APC"]],

  ["Qual equipamento permite medir a pot√™ncia √≥ptica recebida e transmitida?",
    ["OTDR",
     "VFL",
     "Power Meter",
     "Clivador",
     "Switch gerenci√°vel"]],

  ["Em um teste de OTDR, um pico de reflex√£o elevado geralmente indica:",
    ["Configura√ß√£o incorreta de IP",
     "Emenda bem executada",
     "Conector sujo ou mal encaixado ou atenua√ß√£o",
     "Velocidade excessiva",
     "Loop de rede"]],

  ["Por que o conector SC/APC √© preferido em redes FTTH?",
    ["Por ser mais barato",
     "Por permitir maior velocidade Ethernet",
     "Por reduzir reflex√µes √≥pticas",
     "Por ser multimodo",
     "Por n√£o exigir limpeza"]],

  ["Qual a fun√ß√£o principal da CTO em uma rede FTTH?",
    ["Converter sinal √≥ptico",
     "Distribuir a fibra at√© os assinantes",
     "Gerenciar autentica√ß√£o",
     "Fornecer IP p√∫blico",
     "Amplificar o sinal"]],

  ["Qual comando √© mais indicado para verificar lat√™ncia e perda de pacotes em um link?",
    ["nslookup",
     "ifconfig",
     "ping",
     "route",
     "netstat"]],

  ["Em uma instala√ß√£o residencial, qual equipamento √© respons√°vel por converter o sinal √≥ptico em el√©trico no cliente final?",
    ["OLT",
     "Switch Layer 3",
     "ONU/ONT",
     "Splitter",
     "Patch cord"]],

  ["Qual procedimento √© obrigat√≥rio ap√≥s realizar uma clivagem de fibra?",
    ["Testar Wi-Fi",
     "Limpar os res√≠duos de fibra",
     "Reconfigurar IP",
     "Reiniciar a OLT",
     "Trocar o conector"]],

  ["Uma rede WAN se diferencia de uma LAN principalmente por:",
    ["Utilizar apenas fibra",
     "Abranger grandes dist√¢ncias geogr√°ficas",
     "Possuir menor velocidade",
     "N√£o usar roteadores",
     "N√£o utilizar IP"]],

  ["Um switch opera principalmente em qual camada do modelo OSI?",
    ["Camada F√≠sica",
     "Camada de Rede",
     "Camada de Enlace",
     "Camada de Transporte",
     "Camada de Aplica√ß√£o"]],

  ["Em uma rede IPv4, o endere√ßo de IP √© utilizado para:",
    ["Identificar fluxo de pacotes",
     "Definir o gateway",
     "Identificar o host na rede",
     "Configurar DNS",
     "Aumentar seguran√ßa"]],

  ["Qual √© a vantagem do DHCP em redes m√©dias e grandes?",
    ["Aumentar velocidade",
     "Evitar conflitos de IP e facilitar o gerenciamento",
     "Bloquear acessos externos",
     "Criar VLANs",
     "Reduzir lat√™ncia"]],

  ["Qual equipamento geralmente executa NAT, DHCP e Firewall em redes dom√©sticas?",
    ["ONU em bridge",
     "Patch panel",
     "Roteador",
     "Switch",
     "OLT"]],

  ["O comando traceroute √© √∫til principalmente para:",
    ["Testar velocidade",
     "Detectar gargalos e falhas no caminho at√© o destino",
     "Configurar VLAN",
     "Medir pot√™ncia √≥ptica",
     "Ativar firewall"]],

  ["Em cabeamento estruturado, o limite de um cabo UTP CAT6 √©:",
    ["At√© 150m",
     "Somente 50m",
     "At√© 100m",
     "At√© 500m",
     "At√© 40m"]],

  ["Qual fun√ß√£o um firewall em uma rede?",
    ["Distribuir IP",
     "Converter protocolos",
     "Filtrar tr√°fego com base em regras",
     "Amplificar sinal",
     "Balancear carga"]],

  ["Ao usar um segundo roteador como Access Point, qual configura√ß√£o √© correta?",
    ["DHCP ativo nos dois",
     "Usar porta WAN",
     "DHCP desativado e liga√ß√£o via LAN",
     "Alterar MAC",
     "Criar nova sub-rede"]],

["O que significa o 'Gateway Padr√£o' nas configura√ß√µes de um dispositivo?", 
    ["O servidor de arquivos",
    "A interface de ger√™ncia da ONU",
    "O endere√ßo de sa√≠da da rede para a internet",
    "O IP da VLAN de dados","O endere√ßo f√≠sico do hardware"]],

  ["Qual servi√ßo converte nomes de dom√≠nio em endere√ßos IP?",
    ["FTP",
     "DNS",
     "SMTP",
     "SNMP",
     "DHCP"]]
];

const gabarito = [
  "C","D","C","C","C",
  "B","C","C","B","B",
  "C","C","B","C","B",
  "C","C","C","C","B"
];

        fetch(`http://${window.location.hostname}:3000/get_results`)
            .then(r => r.json())
            .then(d => {
                const respostasUsuario = typeof d.respostas === 'string' ? JSON.parse(d.respostas) : d.respostas;
                document.getElementById('resultado-info').innerHTML = `
                    <p style="margin:0"><strong>T√©cnico:</strong> ${d.nome} | <strong>Resultado:</strong> ${d.acertos}/20 acertos</p>
                `;
                
                let html = "";
                perguntas.forEach((pergunta, i) => {
                    const letraCorreta = gabarito[i];// "C"
                    const indexCorreto = letraCorreta.charCodeAt(0) - 65; // Transforma "C" em 2
                    
                    const respostaDada = respostasUsuario[`q${i+1}`]; // "A", "B", etc
                    const indexDada = respostaDada ? respostaDada.charCodeAt(0) - 65 : -1;
                    
                    const acertou = respostaDada === letraCorreta;

                    html += `
                        <div class="pergunta-box ${acertou ? 'correta' : 'errada'}">
                            <p><strong>${i+1}. ${pergunta[0]}</strong></p>
                            <div class="opcoes-lista">
                    `;

                    pergunta[1].forEach((opcaoTexto, j) => {
                        let classeOpcao = "opcao";
                        let icone = "";

                        if (j === indexCorreto) {
                            classeOpcao += acertou ? " marcada-correta" : " deveria-ser";
                            if (acertou) icone = " ‚úÖ";
                        } else if (j === indexDada && !acertou) {
                            classeOpcao += " marcada-errada";
                            icone = " ‚ùå (Sua escolha)";
                        }

                        html += `<div class="${classeOpcao}">${String.fromCharCode(65+j)}) ${opcaoTexto}${icone}</div>`;
                    });

                    html += `</div></div>`;
                });
                document.getElementById('gabarito-lista').innerHTML = html;
            })
            .catch(err => {
                document.getElementById('resultado-info').innerText = "Erro ao carregar dados do banco.";
            });
    </script>
</body>
</html>
